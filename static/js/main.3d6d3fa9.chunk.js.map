{"version":3,"sources":["page/solitaria/Square.module.scss","page/solitaria/Game.module.scss","page/Index.tsx","page/solitaria/Square.tsx","page/solitaria/Grid.tsx","page/solitaria/gameLogic.ts","page/solitaria/Game.tsx","page/solitaria/Index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","Index","history","to","Square","props","innerClasses","value","push","styles","selected","classes","className","join","onClick","Grid","grid","i","j","Boolean","selectedPos","square_prop","row","col","key","style","display","gridTemplateColumns","gridTemplateRows","MI","DX","DY","POS","Array","from","fill","no","can_move","g","y","x","d","ni","nj","getDirection","y1","x1","y2","x2","direction","xd","Math","sign","yd","moveToDirection","iToPos","floor","tmp","judge","cnt","posi","di","rotState","state","res","pos","H","revMove","dfs","arrived","toState","has","judge_res","map","v","st","add","getInitialGrid","length","Number","Game","useState","selectPos","setHistory","stepNo","setStepNo","playHistory","setPlayHistory","currentGrid","useEffect","interval","setInterval","clearInterval","r","w","GameLogic","copyGrid","slice","marginBottom","text","status","color","green","useTheme","palette","error","main","Typography","variant","align","statuText","Stack","spacing","aria-label","ArrowBack","ArrowForward","Button","Set","reverse","alert","width","margin","href","App","basename","process","exact","path","component","Solitaria","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3d6d3fa9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"square\":\"Square_square__1x4Sp\",\"block\":\"Square_block__1_Zjb\",\"ball\":\"Square_ball__22ruA\",\"selected\":\"Square_selected__2h2I_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"game\":\"Game_game__1VLAV\",\"game-grid\":\"Game_game-grid__3Y1JZ\"};","import * as React from 'react'\nimport { Link, RouteComponentProps } from 'react-router-dom'\n\ntype Props = RouteComponentProps\n\nconst Index = ({ history }: Props) => {\n  return (\n    <div>\n      <h1>React 習作</h1>\n      <ul>\n        <li>\n          <Link to=\"/solitaria\">ペグソリティア</Link>\n        </li>\n      </ul>\n    </div>\n  )\n}\n\nexport default Index\n","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport styles from './Square.module.scss'\n\ntype Props = {\n  value: number\n  row: number\n  col: number\n  selected: boolean\n  onClick: (event: React.MouseEvent<HTMLDivElement>) => void\n}\n\nconst Square: React.FC<Props> = (props: Props) => {\n  const innerClasses = []\n  if (props.value == 1) innerClasses.push(styles['ball'])\n  if (props.selected) innerClasses.push(styles['selected'])\n\n  const classes = [styles['square']]\n  if (props.value < 0) classes.push(styles['block'])\n\n  return (\n    <div className={classes.join(' ')} onClick={props.onClick}>\n      <div className={innerClasses.join(' ')}></div>\n    </div>\n  )\n}\n\nexport default Square\n","import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport Square from './Square'\ntype Props = {\n  grid: Array<Array<number>>\n  onClick: (r: number, w: number) => void\n  selectedPos: Array<number> | null\n}\n\nconst Grid: React.FC<Props> = (props: Props) => {\n  const grid = []\n  for (let i = 0; i < 7; i++) {\n    for (let j = 0; j < 7; j++) {\n      const selected = Boolean(\n        props.selectedPos &&\n          props.selectedPos[0] == i &&\n          props.selectedPos[1] == j\n      )\n\n      const square_prop = {\n        row: i,\n        col: j,\n        selected: selected,\n        value: props.grid[i][j],\n        onClick: () => {\n          props.onClick(i, j)\n        },\n      }\n      grid.push(<Square {...square_prop} key={i * 7 + j} />)\n    }\n  }\n\n  const style = {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(7, 80px)',\n    gridTemplateRows: 'repeat(7, 80px)',\n  }\n  return <div style={style}>{grid}</div>\n}\n\nexport default Grid\n","/* 競プロのノリで書いた 反省してない */\nconst MI = 33\nconst H = 7\nconst W = 7\n\nconst DX = [0, 1, 0, -1]\nconst DY = [1, 0, -1, 0]\n\nconst POS = Array.from(new Array(H), () => new Array(W).fill(0))\n\n;(() => {\n  let no = 0\n  for (let i = 0; i < 2; i++) {\n    for (let j = 2; j < 2 + 3; j++) {\n      POS[i][j] = no\n      no++\n    }\n  }\n  for (let i = 2; i < 2 + 3; i++) {\n    for (let j = 0; j < 7; j++) {\n      POS[i][j] = no++\n    }\n  }\n  for (let i = 2 + 3; i < 7; i++) {\n    for (let j = 2; j < 2 + 3; j++) {\n      POS[i][j] = no\n      no++\n    }\n  }\n})()\n\nfunction posToI(y: number, x: number) {\n  return POS[y][x]\n}\n\nconst can_move = (g: Array<Array<number>>, y: number, x: number, d: number) => {\n  if (g[y][x] != 1) return false\n  for (let i = 0; i < 2; i++) {\n    const ni = y + DY[d] * (i + 1)\n    const nj = x + DX[d] * (i + 1)\n    if (ni < 0 || ni >= H || nj < 0 || nj >= W) return false\n    if (g[ni][nj] == -1) return false\n    if (g[ni][nj] == i) return false\n  }\n  return true\n}\n\nconst getDirection = (y1: number, x1: number, y2: number, x2: number) => {\n  let direction = -1\n  const xd = Math.sign(x2 - x1)\n  const yd = Math.sign(y2 - y1)\n  for (let i = 0; i < 4; i++) {\n    if (DY[i] == yd && DX[i] == xd) {\n      direction = i\n      break\n    }\n  }\n  return direction\n}\n\nexport const canMove = (\n  g: Array<Array<number>>,\n  y1: number,\n  x1: number,\n  y2: number,\n  x2: number\n) => {\n  const d = getDirection(y1, x1, y2, x2)\n  if (d < 0) return false\n  if (!(x1 + DX[d] * 2 == x2 && y1 + DY[d] * 2 == y2)) {\n    return false\n  }\n  return can_move(g, y1, x1, d)\n}\n\nexport const move = (\n  g: Array<Array<number>>,\n  y1: number,\n  x1: number,\n  y2: number,\n  x2: number\n) => {\n  const d = getDirection(y1, x1, y2, x2)\n  moveToDirection(g, y1, x1, d)\n}\n\nfunction moveToDirection(\n  g: Array<Array<number>>,\n  y1: number,\n  x1: number,\n  d: number\n) {\n  for (let i = 0; i < 2; i++) {\n    const ni = y1 + DY[d] * (i + 1)\n    const nj = x1 + DX[d] * (i + 1)\n    g[ni][nj] = i\n  }\n  g[y1][x1] = 0\n  return g\n}\n\nconst iToPos = (i: number) => {\n  // 上\n  if (i < 6) {\n    const y = Math.floor(i / 3)\n    const x = Math.floor(i % 3)\n    return [y, x + 2]\n  }\n  // 中央\n  if (i >= MI - 6) {\n    const tmp = i - (MI - 6)\n    const y = Math.floor(tmp / 3)\n    const x = Math.floor(tmp % 3)\n    return [y + 5, x + 2]\n  }\n  // 下\n  {\n    i -= 6\n    const y = Math.floor(i / 7)\n    const x = Math.floor(i % 7)\n    return [y + 2, x]\n  }\n}\n\n/**\n * 0: ゲーム中\n * 1: ゲーム終了(成功)\n * -1: ゲーム終了(失敗)\n */\nexport const judge = (g: Array<Array<number>>) => {\n  let cnt = 0\n  for (let posi = 0; posi < MI; posi++) {\n    const [i, j] = iToPos(posi)\n    if (g[i][j] == 1) {\n      for (let di = 0; di < 4; di++) {\n        if (can_move(g, i, j, di)) return 0\n      }\n      cnt++\n    }\n  }\n  if (cnt <= 1) return 1\n  return -1\n}\n\nfunction toState(g: Array<Array<number>>) {\n  let res = 0\n  for (let pos = 0; pos < MI; pos++) {\n    const [i, j] = iToPos(pos)\n    if (g[i][j] == 1) res |= 1 << pos\n  }\n  return res\n}\n\nfunction rotState(state: number) {\n  let res = 0\n  for (let pos = 0; pos < MI; pos++) {\n    if ((res >> pos) & 1) {\n      let [i, j] = iToPos(pos)\n      // rotate 90\n      const tmp = i\n      i = H - 1 - j\n      j = tmp\n      res |= 1 << posToI(i, j)\n    }\n  }\n  return res\n}\n\nfunction revMove(g: Array<Array<number>>, y: number, x: number, d: number) {\n  for (let i = 0; i < 2; i++) {\n    const ni = y + DY[d] * (i + 1)\n    const nj = x + DX[d] * (i + 1)\n    g[ni][nj] = (i + 1) % 2\n  }\n  g[y][x] = 1\n}\n\nfunction dfs(\n  g: Array<Array<number>>,\n  arrived: Set<number>\n): Array<Array<Array<number>>> | null {\n  const state = toState(g)\n  if (arrived.has(state)) return null\n  const judge_res = judge(g)\n  if (judge_res == 1) {\n    return []\n  } else if (judge_res == -1) {\n    return null\n  }\n  for (let posi = 0; posi < MI; posi++) {\n    const [i, j] = iToPos(posi)\n    for (let di = 0; di < 4; di++) {\n      if (can_move(g, i, j, di)) {\n        moveToDirection(g, i, j, di)\n        const res = dfs(g, arrived)\n        if (res !== null) {\n          res.push(\n            g.map((v) => {\n              return [...v]\n            })\n          )\n          revMove(g, i, j, di)\n          return res\n        }\n        revMove(g, i, j, di)\n      }\n    }\n  }\n  {\n    let st = state\n    for (let i = 0; i < 4; i++) {\n      arrived.add(st)\n      st = rotState(st)\n    }\n  }\n  return null\n}\n\nexport function solve(\n  g: Array<Array<number>>\n): Array<Array<Array<number>>> | null {\n  g = g.map((v) => {\n    return [...v]\n  })\n  const arrived = new Set<number>()\n  const res = dfs(g, arrived)\n  if (res != null) {\n    return res.reverse()\n  } else {\n    return res\n  }\n}\n","import React, { useState, useEffect } from 'react'\nimport Grid from './Grid'\nimport * as GameLogic from './gameLogic'\nimport IconButton from '@mui/material/Button'\nimport Button from '@mui/material/Button'\nimport { ArrowBack, ArrowForward, GamepadSharp } from '@material-ui/icons'\nimport styles from './Game.module.scss'\nimport Stack from '@mui/material/Stack'\nimport { green } from '@mui/material/colors'\nimport { useTheme } from '@material-ui/core/styles'\n\nimport Typography from '@material-ui/core/Typography'\n\ntype GridType = Array<Array<number>>\ntype GameStatus = {\n  status: 0 | 1 | -1\n  text: string\n  color: string\n}\n\nconst copyGrid = (g: GridType) => {\n  return g.map((v) => {\n    return [...v]\n  })\n}\n\nconst getInitialGrid = () => {\n  const grid = [\n    '##111##',\n    '##111##',\n    '1111111',\n    '1110111',\n    '1111111',\n    '##111##',\n    '##111##',\n  ]\n\n  const res = []\n  for (let i = 0; i < grid.length; i++) {\n    const row = []\n    for (let j = 0; j < grid.length; j++) {\n      if (grid[i][j] == '#') row.push(-1)\n      else row.push(Number(grid[i][j]))\n    }\n    res.push(row)\n  }\n  return res\n}\n\nconst Game: React.FC = () => {\n  const [selectedPos, selectPos] = useState<null | Array<number>>(null)\n  const [history, setHistory] = useState<Array<GridType>>([getInitialGrid()])\n  const [stepNo, setStepNo] = useState<number>(0)\n  const [playHistory, setPlayHistory] = useState<boolean>(false)\n  const currentGrid = () => history[stepNo]\n\n  useEffect(() => {\n    // レンダー後に何かの処理をしないといけない、ということを React に伝えます\n    // デフォルトでは、副作用関数は初回のレンダー時および毎回の更新時に呼び出されます。\n\n    const interval = setInterval(() => {\n      if (playHistory) {\n        if (stepNo + 1 < history.length) {\n          setStepNo((no) => no + 1)\n        } else {\n          setPlayHistory(() => false)\n        }\n      }\n    }, 300)\n    return () => clearInterval(interval)\n  })\n\n  const onClickSquare = (r: number, w: number) => {\n    const grid = currentGrid()\n    if (GameLogic.judge(grid) != 0) return\n\n    if (!selectedPos) {\n      if (grid[r][w] == 1) {\n        selectPos([r, w])\n      }\n    } else {\n      if (\n        GameLogic.canMove(currentGrid(), selectedPos[0], selectedPos[1], r, w)\n      ) {\n        const g = copyGrid(currentGrid())\n        GameLogic.move(g, selectedPos[0], selectedPos[1], r, w)\n        setHistory([...history.slice(0, stepNo + 1), g])\n        setStepNo(stepNo + 1)\n      }\n      selectPos(null)\n    }\n  }\n  const statuText = () => {\n    const status = GameLogic.judge(currentGrid())\n    let text\n    let color = 'inherit'\n    if (status == 0) {\n      const rest = 32 - stepNo - 1\n      text = `あと ${rest} コ`\n    } else if (status == 1) {\n      text = '成功'\n      color = green['A400']\n    } else {\n      text = '失敗'\n      color = useTheme().palette.error.main\n    }\n    return (\n      <div style={{ color: color }}>\n        <Typography variant=\"h5\" color=\"inherit\" align=\"center\">\n          {text}\n        </Typography>\n      </div>\n    )\n  }\n\n  const nextHist = () => {\n    if (stepNo + 1 >= history.length) return\n    setStepNo(stepNo + 1)\n  }\n  const prevHist = () => {\n    if (stepNo <= 0) return\n    setStepNo(stepNo - 1)\n  }\n  const resetHist = () => {\n    setStepNo(0)\n    setHistory([getInitialGrid()])\n  }\n  const solve = () => {\n    const res = GameLogic.solve(currentGrid())\n\n    if (res) {\n      setHistory([...history.slice(0, stepNo + 1), ...res])\n      setPlayHistory(true)\n    } else {\n      alert('この状態からは解けません')\n    }\n  }\n  return (\n    <div className={styles['game']}>\n      <div className={styles['game-grid']}>\n        <Grid\n          grid={currentGrid()}\n          selectedPos={selectedPos}\n          onClick={onClickSquare}\n        ></Grid>\n      </div>\n      <div style={{ marginBottom: '10px' }}>{statuText()}</div>\n      <Stack spacing={2} direction=\"row\">\n        <IconButton aria-label=\"back\" color=\"primary\" onClick={prevHist}>\n          <ArrowBack />\n        </IconButton>\n        <IconButton aria-label=\"forward\" color=\"primary\" onClick={nextHist}>\n          <ArrowForward />\n        </IconButton>\n        <Button variant=\"outlined\" color=\"primary\" onClick={resetHist}>\n          リセット\n        </Button>\n        <Button variant=\"outlined\" color=\"primary\" onClick={solve}>\n          続きを自動で解く\n        </Button>\n      </Stack>\n    </div>\n  )\n}\nexport default Game\n","import * as React from 'react'\nimport { Link, RouteComponentProps } from 'react-router-dom'\nimport Game from './Game'\n\ntype Props = RouteComponentProps\n\nconst Index = ({ history }: Props) => {\n  return (\n    <div style={{ width: '800px', margin: '0 auto' }}>\n      <h1>ペグソリティア</h1>\n      <div>\n        <Game />\n      </div>\n      <div>\n        <h2>遊び方</h2>\n        <ul>\n          <li>盤上に駒（ペグまたはボール）を配置する。</li>\n          <li>\n            駒が縦横に並んでいてかつその隣に駒がないとき、駒は他の駒を飛び越えることが出来る。\n          </li>\n          <li>飛び越えられた駒は盤から取り除く。</li>\n          <li>駒が1つになったら成功。中央に1つ残すのが最善とされる。</li>\n        </ul>\n        <a href=\"https://ja.wikipedia.org/wiki/%E3%83%9A%E3%82%B0%E3%83%BB%E3%82%BD%E3%83%AA%E3%83%86%E3%83%BC%E3%83%AB\">\n          https://ja.wikipedia.org/wiki/ペグ・ソリテール\n        </a>\n        より引用\n      </div>\n    </div>\n  )\n}\n\nexport default Index\n","import React from 'react'\nimport logo from './logo.svg'\nimport './App.css'\n\nimport { HashRouter, Route, Switch } from 'react-router-dom'\nimport * as Index from './page/Index'\nimport * as Solitaria from './page/solitaria/Index'\n\nconst App: React.FC = () => {\n  return (\n    // https://qiita.com/ry-itto/items/d11ae12dbe9cd32d83f8#%E4%BD%95%E3%82%92%E3%81%97%E3%81%9F%E3%82%89%E3%81%86%E3%81%BE%E3%81%8F%E3%81%84%E3%81%A3%E3%81%9F%E3%81%AE%E3%81%8B%E8%A7%A3%E6%B1%BA%E6%B3%95\n    <HashRouter basename={process.env.PUBLIC_URL}>\n      <Switch>\n        <Route exact path=\"/\" component={Index.default} />\n        <Route exact path=\"/solitaria\" component={Solitaria.default} />\n      </Switch>\n    </HashRouter>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}